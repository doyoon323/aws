#  Node.js App with Kubernetes & PostgreSQL

ì´ í”„ë¡œì íŠ¸ëŠ” **Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤**ë¥¼ Docker ì»¨í…Œì´ë„ˆë¡œ êµ¬ì¶•í•˜ê³ , **Kubernetes(K3s)** í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•˜ì—¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA) í™˜ê²½ì„ êµ¬ì„±í•œ ì‹¤ìŠµ ë ˆí¬ì§€í† ë¦¬ì…ë‹ˆë‹¤.

> ğŸ”— **Infrastructure Repository:** ì´ ì„œë¹„ìŠ¤ì˜ AWS ì¸í”„ë¼(CloudFront, S3, Terraform) êµ¬ì„± ì½”ë“œëŠ” [ì—¬ê¸°(AWS-Terraform-Repo-ë§í¬)](https://github.com/ë³¸ì¸ì•„ì´ë””/ë ˆí¬2ì´ë¦„)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

##  Architecture
![System Architecture](./Arc.png)

###  Traffic Flow
1. **Ingress (Traefik):** ì™¸ë¶€ íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•˜ì—¬ ë‚´ë¶€ ì„œë¹„ìŠ¤ë¡œ ë¼ìš°íŒ… (L7)
2. **Service (NodePort/ClusterIP):** Pod ë¶€í•˜ ë¶„ì‚° ë° ë„¤íŠ¸ì›Œí¬ ë…¸ì¶œ
3. **Deployment (Node.js):** ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ ì²˜ë¦¬ (Replicas: 2)
4. **PostgreSQL:** `postgres`ë¼ëŠ” ë‚´ë¶€ DNSë¥¼ í†µí•´ ë°±ì—”ë“œì™€ ì—°ê²°

---

##  Tech Stack

| Category | Technology | Description |
| --- | --- | --- |
| **Backend** | Node.js, Express | REST API ì„œë²„ êµ¬í˜„ |
| **Database** | PostgreSQL | ì‚¬ìš©ì ë°ì´í„° ì €ì¥ (Persistent Storage ê³ ë ¤) |
| **Container** | Docker | ì• í”Œë¦¬ì¼€ì´ì…˜ ë° DB ì»¨í…Œì´ë„ˆí™” |
| **Orchestration** | Kubernetes (K3s) | ë°°í¬, ìŠ¤ì¼€ì¼ë§, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ê´€ë¦¬ |
| **Networking** | Traefik Ingress | ì™¸ë¶€ íŠ¸ë˜í”½ ë¼ìš°íŒ… ë° ë¡œë“œ ë°¸ëŸ°ì‹± |

---

##  Directory Structure

```bash
.
â”œâ”€â”€ Dockerfile                  # Node.js ì•± ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ server.js                   # Express ì›¹ ì„œë²„ ì†ŒìŠ¤ ì½”ë“œ
â”œâ”€â”€ package.json                # ì˜ì¡´ì„± ê´€ë¦¬
â”œâ”€â”€ deployment.yaml             # Node.js ì•± ë°°í¬ (Replicas: 2)
â”œâ”€â”€ service.yaml                # Node.js ì„œë¹„ìŠ¤ (NodePort: 31000)
â”œâ”€â”€ ingress.yaml                # Ingress ë¼ìš°íŒ… ì„¤ì •
â”œâ”€â”€ postgres.deployment.yaml    # PostgreSQL DB ë°°í¬
â””â”€â”€ postgres-service.yaml       # DB ë‚´ë¶€ í†µì‹ ìš© ì„œë¹„ìŠ¤ (ClusterIP)